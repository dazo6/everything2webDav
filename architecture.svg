<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 500">
  <!-- Definitions for arrowheads -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333" />
    </marker>
  </defs>

  <!-- Background -->
  <rect width="800" height="500" fill="#f8f9fa" />

  <!-- Components -->
  
  <!-- Client -->
  <g transform="translate(50, 200)">
    <rect width="120" height="80" rx="5" fill="#e3f2fd" stroke="#2196f3" stroke-width="2"/>
    <text x="60" y="45" font-family="Arial" font-size="14" text-anchor="middle" fill="#0d47a1">WebDAV Client</text>
    <text x="60" y="65" font-family="Arial" font-size="10" text-anchor="middle" fill="#0d47a1">(e.g. PotPlayer)</text>
  </g>

  <!-- Everything2WebDav App -->
  <g transform="translate(300, 150)">
    <rect width="160" height="180" rx="5" fill="#e8f5e9" stroke="#4caf50" stroke-width="2"/>
    <text x="80" y="30" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle" fill="#1b5e20">Everything2WebDav</text>
    <line x1="10" y1="90" x2="150" y2="90" stroke="#4caf50" stroke-dasharray="4"/>
    <text x="80" y="65" font-family="Arial" font-size="12" text-anchor="middle" fill="#2e7d32">Metadata Handler</text>
    <text x="80" y="145" font-family="Arial" font-size="12" text-anchor="middle" fill="#2e7d32">File Stream Handler</text>
  </g>

  <!-- Everything Service -->
  <g transform="translate(600, 50)">
    <rect width="140" height="80" rx="5" fill="#fff3e0" stroke="#ff9800" stroke-width="2"/>
    <text x="70" y="45" font-family="Arial" font-size="14" text-anchor="middle" fill="#e65100">Everything</text>
    <text x="70" y="65" font-family="Arial" font-size="10" text-anchor="middle" fill="#e65100">HTTP Server</text>
  </g>

  <!-- File System -->
  <g transform="translate(600, 350)">
    <path d="M10,10 L130,10 L130,70 L10,70 Z M10,10 L25,0 L115,0 L130,10" fill="#eceff1" stroke="#607d8b" stroke-width="2"/>
    <rect x="10" y="10" width="120" height="60" fill="#eceff1" stroke="none"/>
    <text x="70" y="50" font-family="Arial" font-size="14" text-anchor="middle" fill="#37474f">Local File System</text>
  </g>

  <!-- Connections -->

  <!-- Flow 1: PROPFIND (Metadata) -->
  <path d="M170 220 L300 220" stroke="#1976d2" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="235" y="210" font-family="Arial" font-size="11" text-anchor="middle" fill="#1976d2">1. PROPFIND</text>

  <path d="M460 190 L600 90" stroke="#1976d2" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#arrowhead)"/>
  <text x="540" y="130" font-family="Arial" font-size="11" text-anchor="middle" fill="#1976d2">2. HTTP GET (Search)</text>

  <path d="M600 110 L460 210" stroke="#1976d2" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#arrowhead)"/>
  <text x="550" y="170" font-family="Arial" font-size="11" text-anchor="middle" fill="#1976d2">3. HTML Response</text>

  <!-- Internal Processing Label -->
  <text x="380" y="80" font-family="Arial" font-size="10" font-style="italic" text-anchor="middle" fill="#388e3c">Parse HTML -> XML</text>


  <!-- Flow 2: GET (Download) -->
  <path d="M170 260 L300 260" stroke="#d32f2f" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="235" y="280" font-family="Arial" font-size="11" text-anchor="middle" fill="#d32f2f">4. GET (Download)</text>

  <path d="M460 280 L600 380" stroke="#d32f2f" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="540" y="320" font-family="Arial" font-size="11" text-anchor="middle" fill="#d32f2f">5. Read File (IO)</text>

  <path d="M600 400 L460 300" stroke="#d32f2f" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#arrowhead)"/>
  <text x="540" y="420" font-family="Arial" font-size="11" text-anchor="middle" fill="#d32f2f">6. File Stream</text>

  <!-- Legend -->
  <rect x="50" y="430" width="200" height="50" fill="white" stroke="#ccc" />
  <text x="60" y="445" font-family="Arial" font-size="12" font-weight="bold">Legend</text>
  <line x1="60" y1="460" x2="100" y2="460" stroke="#1976d2" stroke-width="2"/>
  <text x="110" y="465" font-family="Arial" font-size="10">Metadata Flow</text>
  <line x1="60" y1="475" x2="100" y2="475" stroke="#d32f2f" stroke-width="2"/>
  <text x="110" y="480" font-family="Arial" font-size="10">Content Flow</text>

</svg>